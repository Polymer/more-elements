<!--
Copyright 2013 The Toolkitchen Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<link rel="import" href="yt-video.html">
<link rel="import" href="yt-search.html">
<element name="yt-search-video" attributes="ImFeelingLucky index maxResults">
  <template>
    <style>
      @host {
        * {
          background: url(images/logo.png) no-repeat center;
          display: block;
        }
      }
    </style>
    <yt-search id="search" maxResults="{{maxResults}}" list="{{list}}"></yt-search>
    <yt-video id="video" videoEntry="{{video}}"></yt-video>
  </template>
  <script>
    Toolkit.register(this, {
      ImFeelingLucky: '',
      index: 0,
      maxResults: 50,
      ImFeelingLuckyChanged: function() {
        if (this.ImFeelingLucky && typeof this.ImFeelingLucky === 'string') {
          this.$.video.style.display = '';
          this.$.search.query = this.ImFeelingLucky;
        } else if (this.$.video.player) {
          this.$.video.player.stopVideo();
          this.$.video.style.display = 'none';
        }
      },
      listChanged: function() {
        this.indexChanged();
      },
      indexChanged: function() {
        this.video = this.list && this.list[this.index];
      }
    });
  </script>
</element>